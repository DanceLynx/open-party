import{J as G,K as N,C as P,B as $,G as j,H,D as J}from"./element-plus.da7f6a44.js";import{_ as z}from"./index.vue_vue_type_style_index_0_lang.b3e6cbe9.js";import{_ as M}from"./picker.6adf8056.js";import{P as Q}from"./index.b75bd452.js";import{r as i}from"./index.e69109c6.js";import{d as A,s as b,r as W,e as X,$ as E,o as d,c as _,U as o,L as t,u as w,V as B,a7 as k,K as C,S as Y,T as Z}from"./@vue.e8706010.js";import"./lodash.8ea337b2.js";import{a as ee}from"./useDictOptions.e00f5941.js";import{a as le}from"./knowledge_cate.040f532c.js";function Fe(a){return i.get({url:"/knowledge/lists",params:a})}function ue(a){return i.post({url:"/knowledge/add",params:a})}function oe(a){return i.post({url:"/knowledge/edit",params:a})}function ge(a){return i.post({url:"/knowledge/delete",params:a})}function te(a){return i.get({url:"/knowledge/detail",params:a})}const ae={class:"edit-popup"},ne=A({name:"knowledgeEdit"}),Ve=A({...ne,props:{dictData:{type:Object,default:()=>({})}},emits:["success","close"],setup(a,{expose:v,emit:F}){const g=b(),m=b(),c=W("add"),D=X(()=>c.value=="edit"?"\u7F16\u8F91\u515A\u53F2\u77E5\u8BC6":"\u65B0\u589E\u515A\u53F2\u77E5\u8BC6"),u=E({id:"",cid:"",title:"",desc:"",abstract:"",image:"",author:"",content:"",click:0,is_show:1,sort:0}),y=E({cid:[{required:!0,message:"\u8BF7\u9009\u62E9\u515A\u53F2\u5206\u7C7B",trigger:["blur"]}],title:[{required:!0,message:"\u8BF7\u8F93\u5165\u6587\u7AE0\u6807\u9898",trigger:["blur"]}],is_show:[{required:!0,message:"\u8BF7\u9009\u62E9\u662F\u5426\u663E\u793A:1-\u662F.0-\u5426",trigger:["blur"]}]}),V=async n=>{for(const e in u)n[e]!=null&&n[e]!=null&&(u[e]=n[e])},{optionsData:U}=ee({knowledge_cate:{api:le}}),x=async n=>{const e=await te({id:n.id});V(e)},h=async()=>{var e,p;await((e=g.value)==null?void 0:e.validate());const n={...u};c.value=="edit"?await oe(n):await ue(n),(p=m.value)==null||p.close(),F("success")},K=(n="add")=>{var e;c.value=n,(e=m.value)==null||e.open()},R=()=>{F("close")};return v({open:K,setFormData:V,getDetail:x}),(n,e)=>{const p=G,q=N,r=P,s=$,S=M,I=z,L=j,O=H,T=J;return d(),_("div",ae,[o(Q,{ref_key:"popupRef",ref:m,title:w(D),async:!0,width:"1000px",onConfirm:h,onClose:R},{default:t(()=>[o(T,{ref_key:"formRef",ref:g,model:u,"label-width":"90px",rules:y},{default:t(()=>[o(r,{label:"\u515A\u53F2\u5206\u7C7B",prop:"cid"},{default:t(()=>[o(q,{class:"flex-1",modelValue:u.cid,"onUpdate:modelValue":e[0]||(e[0]=l=>u.cid=l),clearable:"",placeholder:"\u8BF7\u9009\u62E9\u515A\u53F2\u5206\u7C7B"},{default:t(()=>[(d(!0),_(B,null,k(w(U).knowledge_cate,(l,f)=>(d(),C(p,{key:f,label:l.title,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(r,{label:"\u6587\u7AE0\u6807\u9898",prop:"title"},{default:t(()=>[o(s,{modelValue:u.title,"onUpdate:modelValue":e[1]||(e[1]=l=>u.title=l),clearable:"",placeholder:"\u8BF7\u8F93\u5165\u6587\u7AE0\u6807\u9898"},null,8,["modelValue"])]),_:1}),o(r,{label:"\u7B80\u4ECB",prop:"desc"},{default:t(()=>[o(s,{modelValue:u.desc,"onUpdate:modelValue":e[2]||(e[2]=l=>u.desc=l),clearable:"",placeholder:"\u8BF7\u8F93\u5165\u7B80\u4ECB"},null,8,["modelValue"])]),_:1}),o(r,{label:"\u6587\u7AE0\u6458\u8981",prop:"abstract"},{default:t(()=>[o(s,{class:"flex-1",modelValue:u.abstract,"onUpdate:modelValue":e[3]||(e[3]=l=>u.abstract=l),type:"textarea",rows:"4",clearable:"",placeholder:"\u8BF7\u8F93\u5165\u6587\u7AE0\u6458\u8981"},null,8,["modelValue"])]),_:1}),o(r,{label:"\u6587\u7AE0\u56FE\u7247",prop:"image"},{default:t(()=>[o(S,{modelValue:u.image,"onUpdate:modelValue":e[4]||(e[4]=l=>u.image=l)},null,8,["modelValue"])]),_:1}),o(r,{label:"\u4F5C\u8005",prop:"author"},{default:t(()=>[o(s,{modelValue:u.author,"onUpdate:modelValue":e[5]||(e[5]=l=>u.author=l),clearable:"",placeholder:"\u8BF7\u8F93\u5165\u4F5C\u8005"},null,8,["modelValue"])]),_:1}),o(r,{label:"\u6587\u7AE0\u5185\u5BB9",prop:"content"},{default:t(()=>[o(I,{class:"flex-1",modelValue:u.content,"onUpdate:modelValue":e[6]||(e[6]=l=>u.content=l),height:500},null,8,["modelValue"])]),_:1}),o(r,{label:"\u6D4F\u89C8\u91CF",prop:"click"},{default:t(()=>[o(s,{modelValue:u.click,"onUpdate:modelValue":e[7]||(e[7]=l=>u.click=l),clearable:"",placeholder:"\u8BF7\u8F93\u5165\u6D4F\u89C8\u91CF"},null,8,["modelValue"])]),_:1}),o(r,{label:"\u662F\u5426\u663E\u793A",prop:"is_show"},{default:t(()=>[o(O,{modelValue:u.is_show,"onUpdate:modelValue":e[8]||(e[8]=l=>u.is_show=l),placeholder:"\u8BF7\u9009\u62E9\u662F\u5426\u663E\u793A"},{default:t(()=>[(d(!0),_(B,null,k(a.dictData.show_status,(l,f)=>(d(),C(L,{key:f,label:parseInt(l.value)},{default:t(()=>[Y(Z(l.name),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(r,{label:"\u6392\u5E8F",prop:"sort"},{default:t(()=>[o(s,{modelValue:u.sort,"onUpdate:modelValue":e[9]||(e[9]=l=>u.sort=l),clearable:"",placeholder:"\u8BF7\u8F93\u5165\u6392\u5E8F"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title"])])}}});export{Ve as _,Fe as a,ge as b};
