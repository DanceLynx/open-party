import{H as e,l as a,y as s,N as t,aY as l,av as r,aZ as n,o,p as m,b as i,w as d,F as p,q as c,c as u,f as _,j as f,r as x,a as g,e as b,t as v,K as y,x as h}from"./index.134bed81.js";import{_ as j}from"./u-loadmore.8629bce9.js";import{_ as w}from"./u-loading.e72bd4cb.js";import{_ as k}from"./tabbar.69b45290.js";import{_ as z}from"./plugin-vue_export-helper.21dcd24c.js";import"./u-icon.3f533f9b.js";import"./u-badge.d315fb19.js";import"./util.f34da83a.js";var C=z(a({__name:"member_list",setup(a){const z=s({lists:[],page_no:1,page_size:15,more:"loadmore",extend:[]}),C=async()=>{var a,s;z.more="loading";let t=await(l={page_no:z.page_no,page_size:z.page_size},e.get({url:"/member/lists",data:l}));var l;z.extend=t.extend,console.log(z.extend),z.lists=null==(s=null==(a=z.lists)?void 0:a.concat(t.lists))?void 0:s.map((e=>{let a=z.extend.levels.filter((a=>a.value==e.level));a.length>0?e.level_name=a[0].name:e.level_name="未知";let s=z.extend.departments.filter((a=>a.value==e.department));return s.length>0?e.department_name=s[0].name:e.department_name="未知",e})),t.lists<z.page_size?z.more="nomore":z.more="loadmore"};return t((async e=>{await C()})),l((async()=>{await(async()=>{z.page_no=1,z.more="loadmore",z.lists=[],await C()})(),r()})),n((async()=>{await(async()=>{"nomore"!=z.more&&(z.page_no+=1,await C())})()})),(e,a)=>{const s=h,t=f,l=x(g("u-loadmore"),j),r=x(g("u-empty"),w),n=x(g("tabbar"),k);return o(),m(p,null,[i(t,{class:"px-[20rpx] bg-white"},{default:d((()=>[(o(!0),m(p,null,c(z.lists,((e,a)=>(o(),u(t,{key:a,class:"flex item items-center py-[20rpx]","hover-class":"u-hover-class",onClick:a=>((e,a)=>{let s=encodeURIComponent(JSON.stringify(e));y({url:"/packages/pages/member_detail/member_detail?item="+s})})(e)},{default:d((()=>[i(s,{src:e.avatar,mode:"scaleToFill",class:"w-[200rpx] h-[260rpx] shrink"},null,8,["src"]),i(t,{class:"flex-1 ml-[20rpx] h-[260rpx] py-[10rpx] flex flex-col justify-between"},{default:d((()=>[i(t,{class:"text-xl font-bold"},{default:d((()=>[b(v(e.name),1)])),_:2},1024),i(t,null,{default:d((()=>[b(v(e.level_name)+" | "+v(e.department_name),1)])),_:2},1024),i(t,{class:"desc text-sm text-muted"},{default:d((()=>[b(v(e.desc),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1}),z.lists.length>z.page_size?(o(),u(l,{key:0,status:z.more},null,8,["status"])):_("v-if",!0),z.lists.length<=0?(o(),u(r,{key:1,mode:"list"})):_("v-if",!0),i(n)],64)}}}),[["__scopeId","data-v-2912fd08"]]);export{C as default};
